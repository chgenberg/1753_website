# ==============================================
# 1753 Skincare Backend Environment Variables
# ==============================================

# Database
DATABASE_URL="postgresql://user:password@localhost:5432/1753_skincare"

# Server
PORT=5002
NODE_ENV=development
API_BASE_URL=http://localhost:5002

# JWT
JWT_SECRET=your-secret-key-here

# Email (SendGrid)
SENDGRID_API_KEY=your-sendgrid-api-key
FROM_EMAIL=noreply@1753skincare.com

# Viva Wallet
VIVA_MERCHANT_ID=your-merchant-id
VIVA_API_KEY=your-api-key
VIVA_CLIENT_ID=your-client-id
VIVA_CLIENT_SECRET=your-client-secret
VIVA_BASE_URL=https://demo.vivapayments.com
VIVA_WALLET_WEBHOOK_SECRET=your-webhook-secret

# Fortnox
FORTNOX_API_TOKEN=your-fortnox-api-token
FORTNOX_CLIENT_SECRET=your-fortnox-client-secret
FORTNOX_CLIENT_ID=lWspWpJ1EjTS
FORTNOX_BASE_URL=https://api.fortnox.se/3
FORTNOX_ORDER_PREFIX=1753-

# Sybka Plus / Synka Integration
SYNKA_ACCESS_TOKEN=your-synka-access-token-here
SYNKA_TEAM_ID=844
SYNKA_API_URL=https://mitt.synkaplus.se/api/
SYBKA_SYNC_URL=http://localhost:8000
SYNKA_TIMEOUT=30
SYNKA_RETRY_ATTEMPTS=5
SYNKA_RETRY_DELAY=500

# Ongoing WMS
ONGOING_USERNAME=WSI-FLO-Synka
ONGOING_PASSWORD=your-ongoing-password
ONGOING_BASE_URL=https://api.ongoingsystems.se/

# Drip Email Marketing
DRIP_API_TOKEN=your-drip-api-token
DRIP_ACCOUNT_ID=your-drip-account-id

# ==============================================
# E-COMMERCE INTEGRATIONS
# ==============================================

# Viva Wallet Payment Processing
# Get these from: https://www.vivapayments.com/developers
VIVA_SOURCE_CODE_DEFAULT=your_default_source_code
VIVA_SOURCE_CODE_SUBSCRIPTION=your_subscription_source_code
VIVA_SOURCE_CODE_SEK=your_source_code_sek
VIVA_SOURCE_CODE_EUR=your_source_code_eur
# Use https://demo-api.vivapayments.com for testing
# Use https://api.vivapayments.com for production
VIVA_BASE_URL=https://demo-api.vivapayments.com
# Viva webhook validation key (what the GET validation must return)
VIVA_WALLET_WEBHOOK_SECRET=your_webhook_validation_key_from_viva

# Fortnox Accounting System
# Get these from Fortnox: Settings → Integrations → API
FORTNOX_API_TOKEN=your_fortnox_api_token
FORTNOX_CLIENT_SECRET=your_fortnox_client_secret
FORTNOX_BASE_URL=https://api.fortnox.se/3

# Sybka+ WMS Integration (handles Fortnox → Ongoing sync)
# URL to your deployed Sybka+ Laravel service
SYBKA_SYNC_URL=http://localhost:8000

# Ongoing WMS (3PL Warehouse) - now handled via Sybka+
# Contact Ongoing support for API access
ONGOING_USERNAME=your_ongoing_username
ONGOING_PASSWORD=your_ongoing_password
ONGOING_GOODS_OWNER_ID=your_goods_owner_id
ONGOING_BASE_URL=https://api.ongoingsystems.se

# ==============================================
# EMAIL & MARKETING AUTOMATION
# ==============================================

# Drip.com Integration
DRIP_ACCOUNT_ID=your_drip_account_id
DRIP_API_TOKEN=your_drip_api_token

# Drip Workflow IDs (get these from your Drip dashboard)
DRIP_NEWSLETTER_WORKFLOW_ID=12345
DRIP_ABANDONED_CART_WORKFLOW_ID=67890

# Base URL for cart recovery links
NEXT_PUBLIC_BASE_URL=https://1753website-production.up.railway.app

# SMTP Configuration for transactional emails
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your_smtp_username
SMTP_PASS=your_smtp_password
FROM_EMAIL=noreply@1753skincare.com
FROM_NAME="1753 Skincare"

# ==============================================
# AI & EXTERNAL SERVICES
# ==============================================

# OpenAI for quiz results and content generation
OPENAI_API_KEY=your_openai_api_key
OPENAI_MODEL=gpt-5

# ==============================================
# LOGGING & MONITORING
# ==============================================

# Logging Configuration
LOG_LEVEL=info
LOG_FILE=logs/app.log

# Sentry Error Tracking (optional)
SENTRY_DSN=your_sentry_dsn

# ==============================================
# SECURITY & RATE LIMITING
# ==============================================

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# Webhook Security
WEBHOOK_SECRET=your-webhook-secret-key

# ==============================================
# DEVELOPMENT & TESTING
# ==============================================

# Development flags
NODE_ENV=development
DEBUG=false

# Test mode flags (set to true for testing integrations)
TEST_MODE_VIVA=false
TEST_MODE_FORTNOX=false  
TEST_MODE_ONGOING=false

# Mock payment responses (for development)
MOCK_PAYMENTS=false

# ==============================================
# PRODUCTION SETTINGS
# ==============================================

# Set these for production deployment
# REDIS_URL=redis://localhost:6379
# SESSION_SECRET=your-super-secret-session-key
# ENCRYPTION_KEY=your-32-byte-encryption-key

# ==============================================
# WEBHOOK ENDPOINTS (for reference)
# ==============================================

# These URLs need to be configured in respective services:
# Viva Wallet Webhook: https://yourdomain.com/api/webhooks/viva-wallet
# Ongoing Webhook: https://yourdomain.com/api/orders/webhook/ongoing  
# Fortnox Webhook: https://yourdomain.com/api/orders/webhook/fortnox

# ==============================================
# INTEGRATION TEST ENDPOINTS
# ==============================================

# Test all integrations: GET /api/orders/test/integrations
# Health check: GET /api/orders/health
# Test Viva Wallet: POST /api/orders/payment (with test data)
# Test webhook: POST /api/webhooks/viva-wallet (with test payload) 